{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { Validators } from '@angular/forms';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../../services/usuario.service\";\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(router, fb, usuarioService, ngZone) {\n      this.router = router;\n      this.fb = fb;\n      this.usuarioService = usuarioService;\n      this.ngZone = ngZone;\n      this.formSubmitted = false;\n      this.loginForm = this.fb.group({\n        email: [localStorage.getItem('email') || '', [Validators.required, Validators.email]],\n        password: ['', Validators.required],\n        remember: [false]\n      });\n    }\n    ngOnInit() {\n      this.renderButton();\n    }\n    login() {\n      this.usuarioService.login(this.loginForm.value).subscribe(resp => {\n        if (this.loginForm.get('remember').value) {\n          localStorage.setItem('email', this.loginForm.get('email').value);\n        } else {\n          localStorage.removeItem('email');\n        }\n        // Navegar al Dashboard\n        this.router.navigateByUrl('/');\n      }, err => {\n        // Si sucede un error\n        Swal.fire('Error', err.error.msg, 'error');\n      });\n    }\n    renderButton() {\n      gapi.signin2.render('my-signin2', {\n        'scope': 'profile email',\n        'width': 240,\n        'height': 50,\n        'longtitle': true,\n        'theme': 'dark'\n      });\n      this.startApp();\n    }\n    startApp() {\n      return __awaiter(this, void 0, void 0, function* () {\n        yield this.usuarioService.googleInit();\n        this.auth2 = this.usuarioService.auth2;\n        this.attachSignin(document.getElementById('my-signin2'));\n      });\n    }\n    attachSignin(element) {\n      this.auth2.attachClickHandler(element, {}, googleUser => {\n        const id_token = googleUser.getAuthResponse().id_token;\n        // console.log(id_token);\n        this.usuarioService.loginGoogle(id_token).subscribe(resp => {\n          // Navegar al Dashboard\n          this.ngZone.run(() => {\n            this.router.navigateByUrl('/');\n          });\n        });\n      }, error => {\n        alert(JSON.stringify(error, undefined, 2));\n      });\n    }\n  }\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.UsuarioService), i0.ɵɵdirectiveInject(i0.NgZone));\n  };\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 50,\n    vars: 1,\n    consts: [[\"id\", \"wrapper\", 1, \"login-register\", \"login-sidebar\", 2, \"background-image\", \"url(../assets/images/background/login-register.jpg)\"], [1, \"login-box\", \"card\"], [1, \"card-body\"], [\"autocomplete\", \"off\", \"id\", \"loginform\", 1, \"form-horizontal\", \"form-material\", 3, \"formGroup\", \"ngSubmit\"], [\"href\", \"javascript:void(0)\", 1, \"text-center\", \"db\"], [\"src\", \"../assets/images/logo-icon.png\", \"alt\", \"Home\"], [\"src\", \"../assets/images/logo-text.png\", \"alt\", \"Home\"], [1, \"form-group\", \"m-t-40\"], [1, \"col-xs-12\"], [\"type\", \"email\", \"placeholder\", \"Email\", \"formControlName\", \"email\", 1, \"form-control\"], [1, \"form-group\"], [\"type\", \"password\", \"placeholder\", \"Password\", \"formControlName\", \"password\", 1, \"form-control\"], [1, \"form-group\", \"row\"], [1, \"col-md-12\"], [1, \"checkbox\", \"checkbox-primary\", \"pull-left\", \"p-t-0\"], [\"id\", \"checkbox-signup\", \"type\", \"checkbox\", \"formControlName\", \"remember\", 1, \"filled-in\", \"chk-col-light-blue\"], [\"for\", \"checkbox-signup\"], [\"href\", \"javascript:void(0)\", \"id\", \"to-recover\", 1, \"text-dark\", \"pull-right\"], [1, \"fa\", \"fa-lock\", \"m-r-5\"], [1, \"form-group\", \"text-center\", \"m-t-20\"], [\"type\", \"submit\", 1, \"btn\", \"btn-info\", \"btn-lg\", \"btn-block\", \"text-uppercase\", \"btn-rounded\"], [1, \"row\"], [\"id\", \"google-btn\", 1, \"col-xs-12\", \"col-sm-12\", \"col-md-12\", \"m-t-10\", \"mb-4\", \"text-center\"], [\"id\", \"my-signin2\"], [1, \"form-group\", \"m-b-0\"], [1, \"col-sm-12\", \"text-center\"], [\"routerLink\", \"/register\", 1, \"text-primary\", \"m-l-5\"], [\"id\", \"recoverform\", \"action\", \"index.html\", 1, \"form-horizontal\"], [1, \"text-muted\"], [\"type\", \"text\", \"required\", \"\", \"placeholder\", \"Email\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-lg\", \"btn-block\", \"text-uppercase\", \"waves-effect\", \"waves-light\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"form\", 3);\n        i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_3_listener() {\n          return ctx.login();\n        });\n        i0.ɵɵelementStart(4, \"a\", 4);\n        i0.ɵɵelement(5, \"img\", 5)(6, \"br\")(7, \"img\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 7)(9, \"div\", 8);\n        i0.ɵɵelement(10, \"input\", 9);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"div\", 10)(12, \"div\", 8);\n        i0.ɵɵelement(13, \"input\", 11);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"div\", 12)(15, \"div\", 13)(16, \"div\", 14);\n        i0.ɵɵelement(17, \"input\", 15);\n        i0.ɵɵelementStart(18, \"label\", 16);\n        i0.ɵɵtext(19, \" Remember me \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"a\", 17);\n        i0.ɵɵelement(21, \"i\", 18);\n        i0.ɵɵtext(22, \" Forgot pwd?\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(23, \"div\", 19)(24, \"div\", 8)(25, \"button\", 20);\n        i0.ɵɵtext(26, \"Log In\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(27, \"div\", 21)(28, \"div\", 22);\n        i0.ɵɵelement(29, \"div\", 23);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(30, \"div\", 24)(31, \"div\", 25);\n        i0.ɵɵtext(32, \" Don't have an account? \");\n        i0.ɵɵelementStart(33, \"a\", 26)(34, \"b\");\n        i0.ɵɵtext(35, \"Sign Up\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(36, \"form\", 27)(37, \"div\", 10)(38, \"div\", 8)(39, \"h3\");\n        i0.ɵɵtext(40, \"Recover Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"p\", 28);\n        i0.ɵɵtext(42, \"Enter your Email and instructions will be sent to you! \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(43, \"div\", 10)(44, \"div\", 8);\n        i0.ɵɵelement(45, \"input\", 29);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(46, \"div\", 19)(47, \"div\", 8)(48, \"button\", 30);\n        i0.ɵɵtext(49, \"Reset\");\n        i0.ɵɵelementEnd()()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n      }\n    },\n    dependencies: [i1.RouterLink, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.CheckboxControlValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.NgForm, i2.FormGroupDirective, i2.FormControlName],\n    styles: [\".login-register[_ngcontent-%COMP%]{background-size:cover;background-repeat:no-repeat;background-position:center center;height:100%;width:100%;padding:10% 0;position:fixed}.login-box[_ngcontent-%COMP%]{width:400px;margin:0 auto}.login-box[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{width:100%;left:0;right:0}.login-box[_ngcontent-%COMP%]   .social[_ngcontent-%COMP%]{display:block;margin-bottom:30px}#recoverform[_ngcontent-%COMP%]{display:none}.login-sidebar[_ngcontent-%COMP%]{padding:0;margin-top:0}.login-sidebar[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]{right:0;position:absolute;height:100%}\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}